**思路：**

从大到小枚举可能的边长，最大的边长为 `min(grid, grid[0])`，然后枚举起始坐标，检查以起始坐标为左上端点的、并且以 1 为界的正方形是否存在。如果我们直接检查正方形的边界是否都为 1，那么总的时间复杂度会达到 $O(N^4)$，所以我们需要在检查边长的时候做一些优化，避免重复检查矩阵元素是否为 1。用前缀和的方法可以达到这个效果。我们用 `L[i][j]` 表示 `(i, j)` 的左边有多少个 1，用 `U[i][j]` 表示 `(i, j)` 的上边有多少个 1，那么我们就可以计算一条边两个端点的差值，看看这个差值是否和边的长度相等就可以了。优化后的时间复杂度降为 $O(N^3)$。

**图解：**

![边界符合条件的检查过程](http://qiniu.wenyuetech.cn/1139-1.gif)

